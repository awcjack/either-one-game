<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>二選一淘汰賽遊戲</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- 編輯模式 -->
    <div id="editorMode" class="mode">
        <div class="container">
            <h1>📝 設計你的二選一遊戲</h1>
            <p class="subtitle">編輯選項的文字和圖片，然後開始遊戲</p>

            <!-- 圖片使用建議 -->
            <div class="image-tips">
                <details>
                    <summary>💡 圖片使用建議（點擊展開）</summary>
                    <ul>
                        <li><strong>推薦尺寸：</strong>500x500 至 1000x1000 像素（正方形最佳）</li>
                        <li><strong>檔案大小：</strong>每張圖片建議小於 1MB</li>
                        <li><strong>格式：</strong>JPG、PNG、WebP 都支援（系統會自動壓縮為 JPG）</li>
                        <li><strong>分享建議：</strong>
                            <ul>
                                <li>少量圖片（1-5張）：可選「包含圖片」分享</li>
                                <li>大量圖片（6+張）：建議選「僅文字」分享</li>
                            </ul>
                        </li>
                        <li><strong>快速上傳：</strong>支援拖放圖片到預覽區域</li>
                        <li><strong>本地保存：</strong>點擊「保存草稿」可保存進度</li>
                    </ul>
                </details>
            </div>

            <div id="optionsList" class="options-list">
                <!-- 選項會動態生成 -->
            </div>

            <div class="button-group">
                <button id="addOptionBtn" class="btn btn-secondary">+ 新增選項</button>
                <button id="saveLocalBtn" class="btn btn-secondary">💾 保存草稿</button>
                <button id="loadLocalBtn" class="btn btn-secondary">📂 載入草稿</button>
                <button id="startGameBtn" class="btn btn-primary">開始遊戲</button>
                <button id="shareGameBtn" class="btn btn-accent">分享遊戲</button>
            </div>
        </div>
    </div>

    <!-- 遊戲模式 -->
    <div id="gameMode" class="mode hidden">
        <div class="container">
            <div class="game-header">
                <h2>🎮 二選一淘汰賽</h2>
                <div class="game-stats">
                    <span id="remainingCount">剩餘: 0</span>
                    <span id="eliminatedCount">已淘汰: 0</span>
                </div>
            </div>

            <div id="gameArea" class="game-area">
                <div class="choice-container">
                    <div id="choice1" class="choice-card">
                        <div class="choice-image-container">
                            <img src="" alt="" class="choice-image">
                        </div>
                        <h3 class="choice-text"></h3>
                    </div>

                    <div class="vs-divider">VS</div>

                    <div id="choice2" class="choice-card">
                        <div class="choice-image-container">
                            <img src="" alt="" class="choice-image">
                        </div>
                        <h3 class="choice-text"></h3>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button id="backToEditorBtn" class="btn btn-secondary">返回編輯</button>
                <button id="restartGameBtn" class="btn btn-primary">重新開始</button>
            </div>
        </div>
    </div>

    <!-- 結果模式 -->
    <div id="resultMode" class="mode hidden">
        <div class="container">
            <h1>🏆 最終結果</h1>
            <p class="subtitle">恭喜！最後勝出的是...</p>

            <div class="result-card">
                <div class="result-image-container">
                    <img id="resultImage" src="" alt="" class="result-image">
                </div>
                <h2 id="resultText" class="result-text"></h2>
            </div>

            <div class="button-group">
                <button id="playAgainBtn" class="btn btn-primary">再玩一次</button>
                <button id="backToEditorFromResultBtn" class="btn btn-secondary">返回編輯</button>
            </div>
        </div>
    </div>

    <!-- 分享對話框 -->
    <div id="shareModal" class="modal hidden">
        <div class="modal-content">
            <h2>分享遊戲</h2>

            <div class="share-options">
                <label class="share-option">
                    <input type="radio" name="shareType" value="full" checked>
                    <span>包含圖片和文字</span>
                </label>
                <label class="share-option">
                    <input type="radio" name="shareType" value="text">
                    <span>僅文字（連結更短）</span>
                </label>
            </div>

            <div id="urlWarning" class="url-warning hidden">
                ⚠️ 連結較長，部分平台可能無法支援。建議使用「僅文字」選項。
            </div>

            <p>複製下方連結分享給朋友：</p>
            <div class="share-link-container">
                <input type="text" id="shareLink" readonly>
                <button id="copyLinkBtn" class="btn btn-accent">複製</button>
            </div>

            <div class="url-length-info">
                連結長度: <span id="urlLength">0</span> 字符
            </div>

            <!-- QR 碼 -->
            <div class="qr-section">
                <button id="generateQRBtn" class="btn btn-secondary">生成 QR 碼</button>
                <div id="qrcodeContainer" class="qrcode-container hidden">
                    <p>掃描 QR 碼分享給手機用戶：</p>
                    <div id="qrcode"></div>
                </div>
            </div>

            <button id="closeModalBtn" class="btn btn-secondary">關閉</button>
        </div>
    </div>

    <!-- LZ-String 压缩库 -->
    <script src="https://cdn.jsdelivr.net/npm/lz-string@1.5.0/libs/lz-string.min.js"></script>
    <!-- QR Code 库 -->
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
